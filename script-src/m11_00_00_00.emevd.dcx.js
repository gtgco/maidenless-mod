// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.6.1
// ==/EMEVD==

// コンストラクタ -- constructor
$Event(0, Default, function() {
    RegisterBonfire(11000002, 11001952, 0, 0, 0, 5);
    RegisterBonfire(11000003, 11001953, 0, 0, 0, 5);
    RegisterBonfire(11000004, 11001954, 0, 0, 0, 5);
    RegisterBonfire(11000005, 11001955, 0, 0, 0, 5);
    RegisterBonfire(11000006, 11001956, 0, 0, 0, 5);
    RegisterBonfire(11000007, 11001957, 0, 0, 0, 5);
    RegisterBonfire(11000008, 11001958, 0, 0, 0, 5);
    RegisterBonfire(11000009, 11001959, 0, 0, 0, 5);
    $InitializeCommonEvent(0, 9005810, 11000500, 11000000, 11000950, 11001950, 5);
    $InitializeCommonEvent(0, 9005810, 11000850, 11000001, 11000951, 11001951, 5);
    $InitializeEvent(0, 11002800);
    $InitializeEvent(0, 11002810);
    $InitializeEvent(0, 11002811);
    $InitializeEvent(0, 11002829);
    $InitializeEvent(0, 11002850);
    $InitializeEvent(0, 11002860);
    $InitializeEvent(0, 11002859);
    $InitializeEvent(0, 11002500);
    $InitializeEvent(0, 11002501);
    $InitializeEvent(0, 11002502);
    $InitializeEvent(0, 11002503);
    $InitializeCommonEvent(0, 90005501, 11000510, 11000511, 0, 11001510, 11001511, 11001512, 11000512);
    $InitializeCommonEvent(0, 90005501, 11000515, 11000516, 0, 11001515, 11001516, 11001517, 11000517);
    $InitializeCommonEvent(0, 90005501, 11000520, 11000521, 0, 11001520, 11001521, 11001522, 11000522);
    $InitializeCommonEvent(0, 90005501, 11000525, 11000526, 0, 11001525, 11001526, 11001527, 11000527);
    $InitializeCommonEvent(0, 90005501, 11000530, 11000531, 0, 11001530, 11001531, 11001532, 11000532);
    $InitializeCommonEvent(0, 90005501, 11000535, 11000536, 1, 11001535, 11001536, 11001537, 11000537);
    $InitializeCommonEvent(0, 90005501, 11000610, 11000611, 2, 11001610, 11001611, 11001612, 11000612);
    $InitializeEvent(0, 11002510);
    $InitializeEvent(0, 11000602);
    $InitializeCommonEvent(0, 90005513, 11000540, 11001540, 11001541, 11003541, 1227050, 1, 2);
    $InitializeEvent(0, 11002546, 11000546, 11001546, 11001547, 11003547, 1227050, 1, 2);
    $InitializeEvent(0, 11002547);
    $InitializeCommonEvent(0, 90005511, 11000560, 11001560, 11003560, 227010, 0);
    $InitializeCommonEvent(0, 90005512, 11000560, 11002560, 11002561);
    $InitializeCommonEvent(0, 90005511, 11000562, 11001562, 11003562, 227010, 0);
    $InitializeCommonEvent(0, 90005512, 11000562, 11002562, 11002563);
    $InitializeCommonEvent(0, 90005511, 11000564, 11001564, 11003564, 227070, 0);
    $InitializeEvent(0, 11002540);
    $InitializeEvent(0, 11000600);
    $InitializeEvent(0, 11002601);
    $InitializeEvent(0, 11002603);
    $InitializeEvent(0, 11002580);
    $InitializeCommonEvent(0, 90005520, 11000576, 11001576, 11002576, 11002577);
    $InitializeCommonEvent(0, 90005520, 11000578, 11001578, 11002578, 11002579);
    $InitializeEvent(0, 11002690);
    $InitializeEvent(0, 11002691, 11001691);
    $InitializeCommonEvent(0, 90005605, 11001692, 34, 15, 0, 0, 34152692, 11000000, 11002692, 11002693, 11002694, 11000600, 30040, 0, 0);
    $InitializeCommonEvent(0, 90005632, 580050, 11001695, 80050);
    $InitializeCommonEvent(0, 90005570, 60822, 52, 11001391, 0, 1, 0);
    $InitializeEvent(0, 11002698);
    $InitializeEvent(0, 11002697);
    $InitializeEvent(0, 11002699);
    $InitializeEvent(0, 11002604);
    $InitializeEvent(0, 11002203, 11000203, 11002216);
    $InitializeEvent(0, 11002205, 11000203, 11002215);
    $InitializeEvent(0, 11002207, 11000203, 11002216);
    $InitializeEvent(0, 11002209, 11000203, 11002215);
    $InitializeEvent(1, 11002203, 11000205, 11002218);
    $InitializeEvent(1, 11002205, 11000205, 11002217);
    $InitializeEvent(1, 11002207, 11000205, 11002218);
    $InitializeEvent(1, 11002209, 11000205, 11002217);
    $InitializeEvent(5, 11002260, 11000265, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(6, 11002260, 11000266, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(7, 11002260, 11000267, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(8, 11002260, 11000268, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(9, 11002260, 11000269, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(10, 11002260, 11000270, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(11, 11002260, 11000271, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(12, 11002260, 11000272, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(13, 11002260, 11000273, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(14, 11002260, 11000274, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(15, 11002260, 11000275, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(16, 11002260, 11000276, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(17, 11002260, 11000277, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(18, 11002260, 11000278, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(19, 11002260, 11000279, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(20, 11002260, 11000280, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(21, 11002260, 11000281, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(22, 11002260, 11000282, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(23, 11002260, 11000283, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(24, 11002260, 11000284, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(25, 11002260, 11000285, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(26, 11002260, 11000286, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(27, 11002260, 11000287, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(28, 11002260, 11000288, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeEvent(29, 11002260, 11000289, 30000, 20000, 0, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000393, 11000393, 11001187, 2, 0);
    $InitializeEvent(2, 11002402, 11000252, 30000, 20000, 11002243, 0, 0, 1, 0, 0, 1);
    $InitializeEvent(0, 11002402, 11000254, 30000, 20000, 11002254, 2, 0, 1, 0, 0, 1);
    $InitializeEvent(1, 11002402, 11000259, 30000, 20000, 11002259, 0, 0, 1, 1, 1, 1);
    $InitializeEvent(0, 11002317, 11000408, 11002359, 0, 5);
    $InitializeEvent(1, 11002317, 11000420, 11002359, 0, 10);
    $InitializeCommonEvent(0, 90005300, 11000389, 11000389, 11001198, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000399, 11000399, 11000185, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000495, 11000495, 0, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000496, 11000496, 0, 0, 0);
    $InitializeEvent(0, 11002497, 11000497, 11002497, 0);
    $InitializeCommonEvent(0, 90005300, 11000497, 11000497, 11001193, 0, 0);
    $InitializeEvent(4, 11002402, 11000397, 30001, 20001, 11002625, 0, 0, 1, 1, 1, 1);
    $InitializeCommonEvent(0, 90005300, 11000498, 11000498, 0, 2, 0);
    $InitializeCommonEvent(0, 90005300, 11000499, 11000499, 11000195, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000484, 11000484, 0, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000665, 11000665, 40370, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000666, 11000666, 40372, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000667, 11000667, 40374, 0, 0);
    $InitializeCommonEvent(0, 90005300, 11000299, 11000299, 11001000, 0, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001930, 5, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001931, 5, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001932, 5, 0);
    $InitializeCommonEvent(0, 90005795, 7605, 0, 11009500, 11002141, 11002142, 80605, 9000, 11001710, 30010);
    if (CeremonyActive(20)) {
        $InitializeEvent(0, 11002155, 7605, 11000740, 11000745, TextBannerType.HostVanquished, 11002141);
        $InitializeEvent(0, 11002145);
    }
    $InitializeCommonEvent(0, 90005780, 11000800, 11002164, 11002165, 11000730, SummonSignType.NPCWhiteSign, 11002164, 0, true, 0);
    $InitializeCommonEvent(0, 90005781, 11000800, 11002164, 11002165, 11000730);
    $InitializeCommonEvent(0, 90005782, 11002164, 11002805, 11000730, 11002800, 11002809, 20029);
    $InitializeCommonEvent(0, 90005780, 11000800, 11002168, 11002169, 11000760, SummonSignType.NPCWhiteSign, 11002761, 35009317, true, 0);
    $InitializeCommonEvent(0, 90005781, 11000800, 11002168, 11002169, 11000760);
    $InitializeCommonEvent(0, 90005782, 11002168, 11002805, 11000760, 11002800, 11002809, 0);
    $InitializeCommonEvent(0, 90005703, 11000710, 3941, 3942, 1039409251, 3941, 3940, 3943, 0);
    $InitializeCommonEvent(0, 90005704, 11000710, 3941, 3940, 1039409251, 3);
    $InitializeCommonEvent(0, 90005702, 11000710, 3943, 3940, 3944);
    $InitializeEvent(0, 11003710, 11000710);
    $InitializeEvent(0, 11003711, 11000710);
    $InitializeEvent(0, 11003715, 11000720);
    $InitializeEvent(0, 11003720, 11000725);
    $InitializeCommonEvent(0, 90005704, 11000725, 4201, 4200, 11009451, 3);
    $InitializeCommonEvent(0, 90005703, 11000725, 4201, 4202, 11009451, 4201, 4200, 4204, -1);
    $InitializeCommonEvent(0, 90005702, 11000725, 4203, 4200, 4204);
    $InitializeEvent(0, 11003721, 11000715);
    $InitializeEvent(0, 11003722, 11000715);
    $InitializeEvent(0, 11003723, 11000716);
    $InitializeEvent(0, 11003724);
    $InitializeEvent(0, 11003725, 11000705);
    $InitializeCommonEvent(0, 90005701, 11000705, 4701, 4702, 11009301, 3);
    $InitializeCommonEvent(0, 90005700, 11000705, 4701, 4702, 11009301, 0.65, 4700, 4704, -1);
    $InitializeCommonEvent(0, 90005702, 11000705, 4703, 4700, 4704);
    $InitializeEvent(0, 11003730);
    $InitializeCommonEvent(0, 90005774, 7605, 11001985, 11001985);
    $InitializeEvent(0, 11003740);
    $InitializeEvent(0, 11003741);
    $InitializeCommonEvent(0, 90005771, 11000957, 11002740);
    $InitializeCommonEvent(0, 90005771, 11000952, 11002741);
    $InitializeCommonEvent(0, 90005771, 11000953, 11002742);
    $InitializeCommonEvent(0, 90005771, 11000954, 11002743);
    $InitializeCommonEvent(0, 90005771, 11000955, 11002744);
    $InitializeCommonEvent(0, 90005775, 85495300, 11109687, -1);
});

// プリコンストラクタ -- preconstructor
$Event(50, Default, function() {
    SetCharacterBackreadState(11000705, true);
    SetCharacterBackreadState(11000710, true);
    SetCharacterBackreadState(11000715, true);
    SetCharacterBackreadState(11000720, true);
    SetCharacterBackreadState(11000725, true);
    SetCharacterBackreadState(11000735, true);
    SetCharacterBackreadState(11000740, true);
    SetCharacterBackreadState(11000745, true);
    DisableCharacterHPBarDisplay(11000750);
    $InitializeEvent(0, 11000519);
    $InitializeCommonEvent(0, 90005201, 11000200, 30000, 20000, 15, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000201, 30000, 20000, 11002202, 10, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000202, 30000, 20000, 11002202, 10, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000204, 30000, 20000, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000206, 11002208, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000207, 11002208, 0, -1);
    $InitializeCommonEvent(0, 90005211, 11000208, 30000, 20000, 11002208, 5, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000220, 30010, 20010, 11002220, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000221, 30010, 20010, 11002220, 1, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000222, 11002222, 0, 3004);
    $InitializeCommonEvent(0, 90005200, 11000223, 30010, 20010, 11002223, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000224, 30010, 20010, 11002224, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000225, 30010, 20010, 11002224, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000226, 30010, 20010, 11002226, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000227, 30002, 20002, 11002227, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000209, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000210, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000211, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000212, 11002212, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000213, 11002212, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000214, 11002212, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000240, 11002240, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000246, 11002246, 0, -1);
    $InitializeCommonEvent(0, 90005210, 11000242, 30000, 20000, 11002242, 10, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000243, 11002243, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000244, 11002244, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000247, 11002247, 0, 3012);
    $InitializeCommonEvent(0, 90005250, 11000248, 11002248, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000250, 30000, 20000, 11002250, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000252, 11002243, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000253, 11002243, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000255, 11002255, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000256, 30002, 20002, 11002256, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000257, 30002, 20002, 11002625, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000258, 11002625, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000345, 30000, 20000, 11002345, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005261, 11000346, 11002496, 9, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000341, 30000, 20000, 11002340, 1, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000342, 30000, 20000, 11002340, 2, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000343, 30000, 20000, 11002340, 1.5, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000291, 11002330, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000292, 11002330, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000293, 11002330, 0, -1);
    $InitializeCommonEvent(0, 90005221, 11000375, 30000, 20000, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000376, 30000, 20000, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000377, 30001, 20001, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000378, 30000, 20000, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000390, 30000, 20000, 11002390, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005261, 11000391, 11002206, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000392, 11002230, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000393, 30000, 20000, 11002393, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000394, 11002394, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000300, 30010, 20010, 11002401, 1, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000301, 30010, 20010, 11002353, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000302, 11002353, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000303, 30010, 20010, 11002358, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000304, 30010, 20010, 11002358, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000311, 11002407, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000312, 11002407, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000313, 11002259, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000314, 30010, 20010, 11002259, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000320, 30010, 20010, 11002410, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000321, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000322, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000323, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000324, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000325, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000326, 11002326, 0, 3026);
    $InitializeCommonEvent(0, 90005250, 11000327, 11002327, 0, 3012);
    $InitializeCommonEvent(0, 90005200, 11000350, 30002, 20002, 11002350, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000351, 11002350, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000352, 30002, 20002, 11002259, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000353, 11002353, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000354, 11002354, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000355, 11002354, 0, -1);
    $InitializeCommonEvent(0, 90005211, 11000356, 30003, 20003, 0, 10, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000357, 30004, 20004, 0, 10, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000358, 11002358, 0, -1);
    $InitializeCommonEvent(0, 90005211, 11000359, 30004, 20004, 11002359, 5, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000360, 11002360, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000361, 30003, 20003, 11002359, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000364, 11002405, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000365, 11002405, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000367, 11002407, 0, -1);
    $InitializeCommonEvent(0, 90005201, 11000400, 30000, 20000, 15, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000401, 11002401, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000404, 11002404, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000416, 11002405, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000406, 11002406, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000407, 11002407, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000409, 11002405, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000410, 11002410, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000411, 30000, 20000, 11002411, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000412, 11002412, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000413, 11002413, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000414, 11002414, 0, 3029);
    $InitializeCommonEvent(0, 90005250, 11000415, 11002415, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000405, 11002416, 1, -1);
    $InitializeCommonEvent(0, 90005250, 11000417, 11002416, 0, -1);
    $InitializeCommonEvent(0, 90005210, 11000389, 30000, 20000, 11002389, 35, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000493, 11002493, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000494, 11002494, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000495, 11002495, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000496, 11002496, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000430, 11002430, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000431, 30000, 20000, 11002431, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000433, 30001, 20001, 11002433, 1.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000434, 30002, 20002, 11002433, 6, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000436, 30002, 20002, 11002435, 0.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000437, 30005, 20005, 5, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000439, 30001, 20001, 11002435, 1.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000440, 30005, 20005, 11002295, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000443, 30005, 20005, 5, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000444, 30006, 20006, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000295, 30017, 20017, 11002295, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000296, 30017, 20017, 11002295, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000297, 30018, 20018, 11002297, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000450, 11002455, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000451, 11002455, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000455, 11002471, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000459, 11002471, 0, 3009);
    $InitializeCommonEvent(0, 90005250, 11000469, 11002469, 0, -1);
    $InitializeCommonEvent(0, 90005211, 11000425, 30000, 20000, 11002425, 3, 1, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000426, 30005, 20005, 2, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000427, 30004, 20004, 11002425, 3, 3, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000428, 30006, 20006, 11002425, 3, 3, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000464, 30000, 20000, 11002464, 2, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005211, 11000465, 30004, 20004, 11002464, 2, 2, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000470, 30003, 20003, 11002470, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000471, 30002, 20002, 11002471, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000472, 30003, 20003, 11002466, 1.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000473, 30003, 20003, 11002466, 2.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000475, 30005, 20005, 11002480, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000476, 30003, 20003, 11002476, 0.5, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000477, 30005, 20005, 11002476, 1, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000478, 30005, 20005, 11002480, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000480, 30003, 20003, 11002480, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000620, 30001, 20001, 11002620, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000621, 30001, 20001, 11002620, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000625, 30003, 20003, 11002625, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000626, 30002, 20002, 11002625, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000627, 11002625, 0, -1);
    $InitializeCommonEvent(0, 90005261, 11000630, 11002630, 2, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000631, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000632, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000636, 30006, 20006, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000637, 30006, 20006, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000638, 30005, 20005, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000639, 30004, 20004, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000640, 30005, 20005, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000641, 30005, 20005, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000642, 30006, 20006, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000645, 30001, 20001, 11002645, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000395, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005221, 11000396, 30005, 20005, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000398, 30000, 20000, 11002398, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000650, 30000, 20000, 11002650, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000651, 11002650, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000481, 30000, 20000, 11002650, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000653, 30000, 20000, 10, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000654, 30000, 20000, 10, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000656, 30000, 20000, 11002645, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005261, 11000657, 11002645, 5, 0, -1);
    $InitializeCommonEvent(0, 90005251, 11000658, 3, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000482, 30001, 20001, 11002398, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005251, 11000663, 15, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000482, 11002488, 0, -1);
    $InitializeCommonEvent(0, 90005201, 11000670, 30000, 20000, 1, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000671, 30000, 20000, 1, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000672, 30000, 20000, 11002672, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000675, 30000, 20000, 1, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000676, 30000, 20000, 1, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000681, 30001, 20001, 11002681, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005200, 11000682, 30001, 20001, 11002682, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000683, 30001, 20001, 15, 0, 0, 0, 0, 0);
    $InitializeCommonEvent(0, 90005201, 11000685, 30000, 20000, 1, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000486, 11002486, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000488, 11002488, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000489, 11002499, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000498, 11002498, 0, -1);
    $InitializeCommonEvent(0, 90005200, 11000399, 30000, 20000, 11002256, 0, 0, 1, 0, 0);
    $InitializeCommonEvent(0, 90005250, 11000499, 11002499, 0, -1);
    $InitializeCommonEvent(0, 90005251, 11000484, 10, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000665, 11002496, 0, -1);
    $InitializeCommonEvent(0, 90005250, 11000666, 11002425, 0, -1);
    SetEventFlagID(11008542, ON);
    if (!EventFlag(11008544)) {
        SetEventFlagID(11008544, ON);
    }
});

// 黄金樹の封印 -- Seal of the Golden Tree
$Event(11002500, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9500, 11001500));
    DisplayGenericDialog(20000, PromptType.YESNO, NumberofOptions.NoButtons, 11001500, 3);
    SetEventFlagID(11000500, ON);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

// 黄金樹の我儘 -- Golden Tree's Selfishness
$Event(11002501, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(EventFlag(11000800) && !EventFlag(11000501));
    SetSpEffect(10000, 4280);
    SetSpEffect(10000, 4282);
    WaitFor(EventFlag(11000800) && EventFlag(11000500) && EventFlag(9000));
    SetSpEffect(10000, 4281);
    SetSpEffect(10000, 4283);
    SetEventFlagID(11000501, ON);
    RestartEvent();
});

// 黄金樹の涙 -- Tears of the Golden Tree
$Event(11002502, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000500));
    WaitFor(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0)));
    ChangeWeather(Weather.Rain, -1, false);
    WaitFixedTimeSeconds(3);
    WaitFor(!(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0))));
    ChangeWeather(Weather.None, -1, false);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

// 黄金樹の執着 -- Golden Tree's Obsession
$Event(11002503, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(
        PlayerIsInOwnWorld()
            && EventFlag(11000800)
            && !EventFlag(11000501)
            && ActionButtonInArea(10000, 11001800)
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending)));
    RotateCharacter(10000, 11002800, 60060, true);
    SendInvadingPhantomsHome(0);
    RestartEvent();
});

// エレベータ初期フラグ -- Elevator initial flag
$Event(11000519, Default, function() {
    if (EventFlag(300)) {
        SetEventFlagID(11000530, ON);
    }
    EndIf(ThisEventSlot());
    SetEventFlagID(11000510, ON);
    SetEventFlagID(11000520, ON);
    SetEventFlagID(11000525, ON);
});

// 神門エレベータ封鎖 -- Shinmon elevator blocked
$Event(11000602, Default, function() {
    EndIf(!EventFlag(300));
    DisableObjAct(11001531, -1);
    WaitFor(EventFlag(300) && ActionButtonInArea(8320, 11001530));
    DisplayGenericDialog(99995010, PromptType.OKCANCEL, NumberofOptions.OneButton, 11001530, 3);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

// NPC疑似マルチ_火山館最強の騎士_開始 -- NPC pseudo-multi_volcano hall strongest knight_start
$Event(11002145, Restart, function() {
    EndIf(!CeremonyActive(20));
    SetCharacterBackreadState(11000740, false);
    SetCharacterBackreadState(11000745, false);
    SetCharacterBackreadState(11000735, false);
    SetCharacterTeamType(11000740, TeamType.Human);
    SetCharacterTeamType(11000745, TeamType.Human);
    SetCharacterTeamType(11000735, TeamType.Enemy);
    DeleteAssetfollowingSFX(11006700, true);
    CreateAssetfollowingSFX(11006700, 200, 806700);
});

// NPC疑似マルチ_終了_ターゲット2人用 -- NPC pseudo multi_end_target for 2 people
$Event(11002155, Restart, function(eventFlagId, chrEntityId, chrEntityId2, bannerType, areaEntityId) {
    DisableNetworkSync();
    EndIf(PlayerIsInOwnWorld());
    EndIf(EventFlag(eventFlagId));
    WaitFor(CharacterDead(chrEntityId) && CharacterDead(chrEntityId2));
    SetEventFlagID(eventFlagId, ON);
    DisplayBanner(bannerType);
    if (areaEntityId != 0) {
        SetPsuedoMultiplayerReturnPosition(areaEntityId);
    }
    SetSpEffect(20000, 4821);
    IssueEndOfPseudoMultiplayerNotification(true);
});

// 月の従者_ゴロゴロ往復_右側判定_XX -- Moon servant_Rumbling back and forth_Right side judgment_XX
$Event(11002203, Restart, function(chrEntityId, eventFlagId) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(chrEntityId) <= 0);
    WaitFor(
        InArea(chrEntityId, eventFlagId)
            && ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                || CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.GrayPhantom)
                || CharacterType(10000, TargetType.WhitePhantom)));
    SetNetworkconnectedEventFlagID(eventFlagId, ON);
    WaitFixedTimeSeconds(8);
    SetNetworkconnectedEventFlagID(eventFlagId, OFF);
    RestartEvent();
});

// 月の従者_ゴロゴロ往復_左側判定_XX -- Moon Servant_Rumbling back and forth_Left side judgment_XX
$Event(11002205, Restart, function(chrEntityId, eventFlagId) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(chrEntityId) <= 0);
    WaitFor(
        InArea(chrEntityId, eventFlagId)
            && ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                || CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.GrayPhantom)
                || CharacterType(10000, TargetType.WhitePhantom)));
    SetNetworkconnectedEventFlagID(eventFlagId, ON);
    WaitFixedTimeSeconds(8);
    SetNetworkconnectedEventFlagID(eventFlagId, OFF);
    RestartEvent();
});

// 月の従者_ゴロゴロ移動右_XX -- Moon Squire_Rumbling movement right_XX
$Event(11002207, Restart, function(chrEntityId, eventFlagId) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(chrEntityId) <= 0);
    WaitFor(EventFlag(eventFlagId));
    WaitFixedTimeSeconds(0.9);
    ForceAnimationPlayback(chrEntityId, 30002, true, false, false);
    WaitFixedTimeSeconds(8);
    RestartEvent();
});

// 月の従者_ゴロゴロ移動左_XX -- Moon Squire_Rumbling left_XX
$Event(11002209, Restart, function(chrEntityId, eventFlagId) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(chrEntityId) <= 0);
    WaitFor(EventFlag(eventFlagId));
    WaitFixedTimeSeconds(0.9);
    ForceAnimationPlayback(chrEntityId, 30001, true, false, false);
    WaitFixedTimeSeconds(8);
    RestartEvent();
});

// ルーンの市民_調香バグで特殊待機解除_XX -- Citizen of Rune_Special standby canceled due to incense mixing bug_XX
$Event(11002260, Restart, function(chrEntityId, animationId, animationId2, timeSeconds, value, value2, value3, value4, value5) {
    EndIf(SpecialStandbyEndedFlag(chrEntityId));
    if (value != 0) {
        DisableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, false);
    }
    ForceAnimationPlayback(chrEntityId, animationId, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    spChr &= (CharacterHasSpEffect(chrEntityId, 14405) || CharacterHasSpEffect(chrEntityId, 14406))
        && CharacterBackreadStatus(chrEntityId)
        && (CharacterHasSpEffect(chrEntityId, 5080) || CharacterHasSpEffect(chrEntityId, 5450));
    if (!(value2 == 0 && value3 == 0 && value4 == 0 && value5 == 0)) {
        if (value2 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.Combat);
        }
        if (value3 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.ActiveAlert);
        }
        if (value4 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.PassiveAlert);
        }
        spChr &= chr;
    }
L9:
    sp = CharacterHasSpEffect(chrEntityId, 481)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90110)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    sp2 = CharacterHasSpEffect(chrEntityId, 482)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90120)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp3 = CharacterHasSpEffect(chrEntityId, 483)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90140)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90161);
    sp4 = CharacterHasSpEffect(chrEntityId, 484)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90130)
        && !CharacterHasSpEffect(chrEntityId, 90161)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp5 = CharacterHasSpEffect(chrEntityId, 487)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90150)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    spChr &= chrSp;
    WaitFor(
        spChr
            || HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(chrEntityId, ON);
    if (!(!CharacterHasSpEffect(chrEntityId, 5080) && !CharacterHasSpEffect(chrEntityId, 5450))) {
        WaitFixedTimeSeconds(timeSeconds);
        if (value != 0) {
            EnableCharacterGravity(chrEntityId);
            SetCharacterMaphit(chrEntityId, true);
        }
        ForceAnimationPlayback(chrEntityId, animationId2, true, false, false);
        EndEvent();
    }
L0:
    if (value != 0) {
        EnableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, true);
    }
    EndEvent();
});

// 見張り兵士_騎士呼び_XX -- Watch Soldier_Knight Call_XX
$Event(11002317, Restart, function(chrEntityId, areaEntityId, timeSeconds, targetDistance) {
    EndIf(ThisEventSlot());
    DisableCharacterAI(chrEntityId);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaSp = (EntityInRadiusOfEntity(10000, chrEntityId, targetDistance, 1)
        || CharacterHasSpEffect(10000, 10004))
        && InArea(10000, areaEntityId);
    sp = CharacterHasSpEffect(chrEntityId, 481)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90110)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    sp2 = CharacterHasSpEffect(chrEntityId, 482)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90120)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp3 = CharacterHasSpEffect(chrEntityId, 483)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90140)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90161);
    sp4 = CharacterHasSpEffect(chrEntityId, 484)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90130)
        && !CharacterHasSpEffect(chrEntityId, 90161)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp5 = CharacterHasSpEffect(chrEntityId, 487)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90150)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    areaSpChr = areaSp && chrSp;
    WaitFor(
        HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260)
            || areaSpChr
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedThisEventSlot(ON);
    if (areaSpChr.Passed) {
        WaitFixedTimeSeconds(timeSeconds);
    }
L1:
    EnableCharacterAI(chrEntityId);
});

// 喪失の兵士_笛吹反応_XX -- Lost Soldier_Picture Reaction_XX
$Event(11002360, Restart, function(chrEntityId, animationId, animationId2, areaEntityId, targetDistance, timeSeconds, value, value2, value3, value4) {
    EndIf(SpecialStandbyEndedFlag(chrEntityId));
    if (value != 0) {
        DisableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, false);
    }
    ForceAnimationPlayback(chrEntityId, animationId, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaSpChr &= ((EntityInRadiusOfEntity(10000, chrEntityId, targetDistance, 1)
        || CharacterHasSpEffect(10000, 10000))
        && InArea(10000, areaEntityId))
        && CharacterBackreadStatus(chrEntityId)
        && (CharacterHasSpEffect(chrEntityId, 5080) || CharacterHasSpEffect(chrEntityId, 5450));
    if (!(value2 == 0 && value3 == 0 && value4 == 0)) {
        if (value2 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.Combat);
        }
        if (value3 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.ActiveAlert);
        }
        if (value4 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.PassiveAlert);
        }
        areaSpChr &= chr;
    }
L9:
    areaSpChr &= chrSp;
    WaitFor(
        areaSpChr
            || HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260));
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(chrEntityId, ON);
    if (!(!CharacterHasSpEffect(chrEntityId, 5080) && !CharacterHasSpEffect(chrEntityId, 5450))) {
        WaitFixedTimeSeconds(timeSeconds);
        if (value != 0) {
            EnableCharacterGravity(chrEntityId);
            SetCharacterMaphit(chrEntityId, true);
        }
        ForceAnimationPlayback(chrEntityId, animationId2, true, false, false);
        EndEvent();
    }
L0:
    if (value != 0) {
        EnableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, true);
    }
    EndEvent();
});

// キャラ死亡_喪失の兵士 -- Character death_lost soldier
$Event(11002370, Restart, function(chrEntityId) {
    ForceCharacterDeath(chrEntityId, false);
});

// ラダゴンの獅子参戦 -- Radagon's Lion Joins the Battle
$Event(11002397, Restart, function(chrEntityId, areaEntityId, timeSeconds) {
    EndIf(ThisEventSlot());
    ForceAnimationPlayback(chrEntityId, 30001, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    chrArea = (CharacterAIState(11000257, AIStateType.Combat)
        || CharacterAIState(11000258, AIStateType.Combat)
        || CharacterAIState(11000625, AIStateType.Combat)
        || CharacterAIState(11000626, AIStateType.Combat)
        || CharacterAIState(11000627, AIStateType.Combat))
        && InArea(10000, areaEntityId);
    chrAreaSp = chrArea && chrSp;
    WaitFor(
        HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterAIState(chrEntityId, AIStateType.Combat)
            || CharacterAIState(chrEntityId, AIStateType.Alert)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260)
            || chrAreaSp);
    SetNetworkconnectedThisEventSlot(ON);
    if (chrAreaSp.Passed) {
        WaitFixedTimeSeconds(timeSeconds);
    }
L1:
    EnableCharacterAI(chrEntityId);
    ForceAnimationPlayback(chrEntityId, 20001, false, false, false);
    ChangeCharacterPatrolBehavior(chrEntityId, 11003397);
    SetSpEffect(chrEntityId, 5000);
});

// 特殊待機解除_警戒状態判定含め_XX -- Special standby release_including warning status determination_XX
$Event(11002402, Restart, function(chrEntityId, animationId, animationId2, areaEntityId, timeSeconds, value, value2, value3, value4, value5) {
    EndIf(SpecialStandbyEndedFlag(chrEntityId));
    if (value != 0) {
        DisableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, false);
    }
    ForceAnimationPlayback(chrEntityId, animationId, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaChrSp &= InArea(10000, areaEntityId)
        && CharacterBackreadStatus(chrEntityId)
        && (CharacterHasSpEffect(chrEntityId, 5080) || CharacterHasSpEffect(chrEntityId, 5450));
    if (!(value2 == 0 && value3 == 0 && value4 == 0 && value5 == 0)) {
        if (value2 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.Combat);
        }
        if (value3 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.ActiveAlert);
        }
        if (value4 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.PassiveAlert);
        }
        if (value5 != 0) {
            chr |= CharacterAIState(chrEntityId, AIStateType.Alert);
        }
        areaChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(chrEntityId, 481)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90110)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    sp2 = CharacterHasSpEffect(chrEntityId, 482)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90120)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp3 = CharacterHasSpEffect(chrEntityId, 483)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90140)
        && !CharacterHasSpEffect(chrEntityId, 90160)
        && !CharacterHasSpEffect(chrEntityId, 90161);
    sp4 = CharacterHasSpEffect(chrEntityId, 484)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90130)
        && !CharacterHasSpEffect(chrEntityId, 90161)
        && !CharacterHasSpEffect(chrEntityId, 90162);
    sp5 = CharacterHasSpEffect(chrEntityId, 487)
        && !CharacterHasSpEffect(chrEntityId, 90100)
        && !CharacterHasSpEffect(chrEntityId, 90150)
        && !CharacterHasSpEffect(chrEntityId, 90160);
    areaChrSp &= chrSp;
    WaitFor(
        areaChrSp
            || HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(chrEntityId, ON);
    if (!(!CharacterHasSpEffect(chrEntityId, 5080) && !CharacterHasSpEffect(chrEntityId, 5450))) {
        WaitFixedTimeSeconds(timeSeconds);
        if (value != 0) {
            EnableCharacterGravity(chrEntityId);
            SetCharacterMaphit(chrEntityId, true);
        }
        ForceAnimationPlayback(chrEntityId, animationId2, true, false, false);
        EndEvent();
    }
L0:
    if (value != 0) {
        EnableCharacterGravity(chrEntityId);
        SetCharacterMaphit(chrEntityId, true);
    }
    EndEvent();
});

// 蛇霊登場 -- Snake spirit appears
$Event(11002497, Restart, function(chrEntityId, areaEntityId, timeSeconds) {
    EndIf(ThisEventSlot());
    ForceAnimationPlayback(chrEntityId, 30002, false, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    area = InArea(10000, areaEntityId) && EntityInRadiusOfEntity(chrEntityId, 10000, 20, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(chrEntityId, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(chrEntityId, 436)
            || CharacterHasStateInfo(chrEntityId, 2)
            || CharacterHasStateInfo(chrEntityId, 5)
            || CharacterHasStateInfo(chrEntityId, 6)
            || CharacterHasStateInfo(chrEntityId, 260)
            || areaChrSp);
    SetNetworkconnectedThisEventSlot(ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(timeSeconds);
    }
L1:
    ForceAnimationPlayback(chrEntityId, 20002, false, false, false);
});

// エレベータイベント起動 -- Elevator event activation
$Event(11002510, Default, function() {
    $InitializeCommonEvent(0, 90005500, 11000510, 11000511, 0, 11001510, 11001511, 11003511, 11001512, 11003512, 11002511, 11002512, 11000512, 11000513, 0);
    $InitializeCommonEvent(0, 90005500, 11000515, 11000516, 0, 11001515, 11001516, 11003516, 11001517, 11003517, 11002516, 11002517, 11000517, 11000518, 0);
    $InitializeCommonEvent(0, 90005500, 11000520, 11000521, 0, 11001520, 11001521, 11003521, 11001522, 11003522, 11002521, 11002522, 11000522, 11000523, 0);
    $InitializeCommonEvent(0, 90005500, 11000525, 11000526, 0, 11001525, 11001526, 11003526, 11001527, 11003527, 11002526, 11002527, 11000527, 11000528, 0);
    if (!EventFlag(300)) {
        $InitializeCommonEvent(0, 90005505, 11000530, 11000531, 0, 11001530, 11001531, 11003531, 11001532, 11003532, 11000532, 11000533, 0);
    }
    $InitializeCommonEvent(0, 90005505, 11000535, 11000536, 1, 11001535, 11001536, 11003536, 11001537, 11003537, 11000537, 11000538, 0);
    $InitializeCommonEvent(0, 90005500, 11000610, 11000611, 2, 11001610, 11001611, 11003611, 11001612, 11003612, 11002611, 11002612, 11000612, 11000613, 0);
});

// 扉初期開放 -- Initial door opening
$Event(11002540, Restart, function() {
    ReproduceAssetAnimation(11001542, 2);
    ReproduceAssetAnimation(11001571, 2);
    ReproduceAssetAnimation(11001572, 2);
    ReproduceAssetAnimation(11001570, 2);
});

// リアル円卓扉_神塔側 -- Real round table door_Shinto tower side
$Event(11002546, Restart, function(eventFlagId, assetEntityId, assetEntityId2, objactEventFlag, objactParamId, animationId, animationId2) {
    if (EventFlag(eventFlagId)) {
        DisableObjAct(assetEntityId2, objactParamId);
        ReproduceAssetAnimation(assetEntityId, animationId2);
        DisableObjAct(assetEntityId, 227012);
        EndEvent();
    }
L0:
    WaitFor(!EventFlag(eventFlagId) && ObjActEventFlag(objactEventFlag));
    SetNetworkconnectedEventFlagID(eventFlagId, ON);
    DisableObjAct(assetEntityId2, objactParamId);
    ForceAnimationPlayback(assetEntityId, animationId, false, false, false);
    DisableObjAct(assetEntityId, 227012);
});

// リアル円卓扉_円卓側 -- Real round table door_round table side
$Event(11002547, Restart, function() {
    EndIf(EventFlag(11000546));
    WaitFor(EventFlag(11008546));
    SetNetworkconnectedEventFlagID(11000546, ON);
    DisableObjAct(11001547, 1227050);
});

// 梯子登録 -- ladder registration
$Event(11002580, Restart, function() {
    RegisterLadder(11000580, 11000581, 11001580);
    RegisterLadder(11000582, 11000583, 11001582);
    RegisterLadder(11000584, 11000585, 11001584);
    RegisterLadder(11000586, 11000587, 11001586);
    RegisterLadder(11000588, 11000589, 11001588);
    RegisterLadder(11000590, 11000591, 11001590);
    RegisterLadder(11000592, 11000593, 11001592);
    RegisterLadder(11000594, 11000595, 11001594);
    RegisterLadder(11000596, 11000597, 11001596);
});

// 神の門エレベータ_初回起動 -- God's Gate Elevator_First Startup
$Event(11000600, Restart, function() {
    DisableNetworkSync();
    EndIf(ThisEventSlot());
    WaitFixedTimeFrames(2);
    DisableObjAct(11001536, -1);
    WaitFor(EventFlag(11000535) && !EventFlag(11000537));
    EndIf(ThisEventSlot());
    SetNetworkconnectedThisEventSlot(ON);
    EndEvent();
});

// ワープトラップ_ワープ禁止特殊効果 -- Warp Trap_Warp Prohibition Special Effect
$Event(11002601, Restart, function() {
    WaitFor(EventFlag(11000601));
    ForceAnimationPlayback(10000, 60131, false, false, false);
    SetEventFlagID(9080, ON);
    SetEventFlagID(11000601, OFF);
});

// 地下迷宮王都からワープ_カメラ角度変更 -- Warp from the underground labyrinth capital_Change camera angle
$Event(11002603, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(11000603));
    WaitFor(EventFlag(11000603) && InArea(10000, 11002500));
    SetCameraAngle(11.9, 1.11);
    SetEventFlagID(11000603, OFF);
});

// 闘技場の扉解放 -- Opening the arena door
$Event(11002604, Restart, function() {
    WaitFor(EventFlag(11008556));
    SetEventFlagID(11058556, ON);
});

// 落ち葉SFX処理 -- Fallen leaves SFX processing
$Event(11002690, Restart, function() {
    DisableNetworkSync();
    if (!ThisEventSlot()) {
        DeleteMapSFX(11003690, false);
    }
    WaitFor(PlayerInMap(11, 0, -1, -1) && !InArea(10000, 11002690));
    SpawnMapSFX(11003690);
    WaitFixedTimeSeconds(1);
    WaitFor(!PlayerInMap(11, 0, -1, -1) || InArea(10000, 11002690));
    DeleteMapSFX(11003690, true);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

// アセット破壊禁止 -- Prohibition of asset destruction
$Event(11002691, Restart, function(assetEntityId) {
    EnableAssetInvunerability(assetEntityId);
});

// ジェスチャー入手_9022剣に誓って -- Gesture acquisition_9022 Swear on the sword
$Event(11002696, Restart, function() {
    EndIf(EventFlag(11007992));
    WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9531, 11001696));
    AwardItemLot(11001010);
    EndEvent();
});

// チュートリアルメッセージ_円卓のマリカ像 -- Tutorial message_Marika statue at the round table
$Event(11002697, Restart, function() {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        EventFlag(710880)
            && !EventFlag(69480)
            && !EventFlag(2051)
            && !EventFlag(2052)
            && PlayerIsInOwnWorld()
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending))
            && !CharacterHasSpEffect(10000, 9640));
    ShowTutorialPopup(1880, true, true);
    if (!EventFlag(69480)) {
        DirectlyGivePlayerItem(ItemType.Goods, 9153, 710880, 1);
    }
    SetEventFlagID(69480, ON);
});

// チュートリアルメッセージ_王都闘技場 -- Tutorial message_Royal Capital Arena
$Event(11002698, Restart, function() {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        !EventFlag(710850)
            && InArea(10000, 11002698)
            && PlayerIsInOwnWorld()
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending))
            && !CharacterHasSpEffect(10000, 9640));
    SetEventFlagID(710850, ON);
    SetEventFlagID(60350, ON);
    if (!EventFlag(6080)) {
        SetEventFlagID(6080, ON);
        StartPS5Activity(7);
    }
    WaitFixedTimeFrames(1);
    ShowTutorialPopup(1850, true, true);
    if (!EventFlag(69450)) {
        DirectlyGivePlayerItem(ItemType.Goods, 9150, 710850, 1);
    }
    WaitFixedTimeFrames(1);
    SetEventFlagID(69450, ON);
});

// 闘技場入り口_マルチ中は稼働しない -- Arena entrance_does not operate during multiplayer
$Event(11002699, Default, function() {
    EndIf(EventFlag(11008556));
    if (!HasMultiplayerState(MultiplayerState.Multiplayer)) {
        if (!HasMultiplayerState(MultiplayerState.MultiplayerPending)) {
            EnableObjAct(11001699, 227030);
            WaitFor(
                HasMultiplayerState(MultiplayerState.Multiplayer)
                    || HasMultiplayerState(MultiplayerState.MultiplayerPending));
            DisableObjAct(11001699, 227030);
            RestartEvent();
        }
    }
L0:
    DisableObjAct(11001699, 227030);
    WaitFor(
        !(HasMultiplayerState(MultiplayerState.Multiplayer)
            || HasMultiplayerState(MultiplayerState.MultiplayerPending)));
    EnableObjAct(11001699, 227030);
    RestartEvent();
});

// マルギット撃破 -- Defeat Margit
$Event(11002800, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHPValue(11000800) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000800));
    HandleBossDefeatAndDisplayBanner(11000800, TextBannerType.DemigodFelled);
    if (PlayerIsInOwnWorld()) {
        TriggerMultiplayerEvent(0);
    }
    DisableAsset(11001820);
    EnableHit(11004821);
    WaitFixedTimeFrames(1);
    DisableHit(11004820);
    SetEventFlagID(11000800, ON);
    SetEventFlagID(9104, ON);
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61104, ON);
    }
    if (!EventFlag(10000850)) {
        SetEventFlagID(10000850, ON);
    }
    if (!EventFlag(9100)) {
        SetEventFlagID(9100, ON);
    }
    if (PlayerIsInOwnWorld()) {
        if (!EventFlag(61100)) {
            SetEventFlagID(61100, ON);
        }
    }
    if (!EventFlag(10000850)) {
        DisableCharacter(10000850);
        DisableCharacterCollision(10000850);
        ForceCharacterDeath(10000850, false);
    }
    EndIf(!PlayerIsInOwnWorld());
    SetPlayerRespawnPoint(11002020);
    SaveRequest();
});

// マルギット出現 -- Margit appears
$Event(11002810, Restart, function() {
    if (EventFlag(11000800)) {
        DisableCharacter(11005800);
        DisableCharacterCollision(11005800);
        ForceCharacterDeath(11005800, false);
        DisableAsset(11001820);
        DisableHit(11004820);
        DisableAsset(11006830);
        EndEvent();
    }
L0:
    DisableCharacterAI(11005800);
    DisableAsset(11001820);
    DisableHit(11004820);
    DisableCharacterCollision(11000800);
    EndIf(
        CharacterType(10000, TargetType.BlackPhantom)
            || CharacterType(10000, TargetType.Invader)
            || CharacterType(10000, TargetType.Invader2)
            || CharacterType(10000, TargetType.Invader3)
            || CharacterType(10000, TargetType.BluePhantom));
    if (!EventFlag(11000801)) {
        WarpCharacterAndCopyFloor(11000800, TargetEntityType.Area, 11002810, -1, 11000800);
        ForceAnimationPlayback(11000800, 30000, false, false, false);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
        if (PlayerIsInOwnWorld()) {
            SendInvadingPhantomsHome(0);
        }
        if (PlayerIsInOwnWorld()) {
            PlayCutsceneToPlayerAndWarp(11000040, CutscenePlayMode.Skippable, 11002812, 11000000, 10000, 0, false);
        } else {
            PlayCutsceneToPlayer(11000040, CutscenePlayMode.Skippable, 10000);
        }
        WaitFixedTimeRealFrames(1);
        SetNetworkconnectedEventFlagID(11000801, ON);
        if (PlayerIsInOwnWorld()) {
            SetCameraAngle(14.42, -37.69);
        }
        DisableAsset(11006830);
        IssueShortWarpRequest(11000800, TargetEntityType.Area, 11002811, -1);
        ForceAnimationPlayback(11000800, 20000, false, false, false);
    } else {
L1:
        DisableAsset(11006830);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
    }
L2:
    EnableCharacterCollision(11000800);
    EnableCharacterAI(11005800);
    SetNetworkUpdateRate(11005800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130002);
});

// マルギット激昂 -- margit rage
$Event(11002811, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHasSpEffect(11000800, 16205));
    SetEventFlagID(11002802, ON);
    EnableAsset(11001820);
    EnableHit(11004820);
    WaitFixedTimeFrames(1);
    DisableHit(11004821);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130003);
});

// マルギット戦イベント起動 -- Margit battle event starts
$Event(11002829, Restart, function() {
    $InitializeCommonEvent(0, 9005800, 11000800, 11001800, 11002800, 11002805, 11005800, 10000, 0, 0);
    $InitializeCommonEvent(0, 9005801, 11000800, 11001800, 11002800, 11002805, 11002806, 10000);
    $InitializeCommonEvent(0, 9005811, 11000501, 11001800, 17, 0);
    $InitializeCommonEvent(0, 9005811, 11000800, 11001801, 18, 11000801);
    $InitializeCommonEvent(0, 9005822, 11000800, 213001, 11002805, 11002806, 0, 11002802, 0, 0);
});

// 中ボス撃破 -- Defeat mid-boss
$Event(11002850, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(CharacterHPValue(11000850) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008050, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000850));
    HandleBossDefeatAndDisplayBanner(11000850, TextBannerType.GreatEnemyFelled);
    SetEventFlagID(11000850, ON);
    SetEventFlagID(9105, ON);
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61105, ON);
    }
});

// 中ボス出現 -- Mid-boss appears
$Event(11002860, Restart, function() {
    if (EventFlag(11000850)) {
        DisableCharacter(11005850);
        DisableCharacterCollision(11005850);
        ForceCharacterDeath(11005850, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(11005850);
    if (!EventFlag(11000851)) {
        ForceAnimationPlayback(11000850, 30000, true, false, false);
        DisableCharacter(11000850);
        WaitFor(
            (PlayerIsInOwnWorld() && EntityInRadiusOfEntity(11000850, 10000, 25, 1))
                || HasDamageType(10000850, 0, DamageType.Unspecified));
        SetNetworkconnectedEventFlagID(11000851, ON);
        ForceAnimationPlayback(11000850, 20000, false, false, false);
        EnableCharacter(11000850);
    } else {
L1:
        WaitFor(EventFlag(11002855) && InArea(10000, 11002850));
    }
L2:
    EnableCharacterAI(11000850);
    SetNetworkUpdateRate(11005850, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000850, 0, 904720002);
});

// 中ボス激昂 -- Middle boss rage
$Event(11002861, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(HPRatio(11000850) <= 0.6);
    SetEventFlagID(11002852, ON);
});

// 中ボスイベント起動 -- Mid-boss event starts
$Event(11002859, Restart, function() {
    $InitializeCommonEvent(0, 9005800, 11000850, 11001850, 11002850, 11002855, 11005850, 10000, 11000851, 0);
    $InitializeCommonEvent(0, 9005801, 11000850, 11001850, 11002850, 11002855, 11002856, 10000);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001850, 4, 11000851);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001851, 5, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001852, 4, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001853, 4, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001854, 19, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001857, 5, 0);
    $InitializeCommonEvent(0, 9005811, 11000850, 11001858, 5, 0);
    $InitializeCommonEvent(0, 9005822, 11000850, 472001, 11002855, 11002856, 0, 11002852, 0, 0);
});

// 炎上ヒント -- Flaming tips
$Event(11002910, Restart, function() {
    WaitFor(EventFlag(11000800) && EventFlag(130));
    DeleteAssetfollowingSFX(11001920, true);
    CreateAssetfollowingSFX(11001920, 100, 30);
});

// 【専用】両開き扉_エラーメッセージ -- [Exclusive] Double door_error message
$Event(11002920, Default, function(eventFlagId, entityId) {
    DisableNetworkSync();
    WaitFor(ActionButtonInArea(7100, entityId) || EventFlag(eventFlagId));
    EndIf(EventFlag(eventFlagId));
    DisplayGenericDialog(10010170, PromptType.OKCANCEL, NumberofOptions.OneButton, entityId, 3);
    RestartEvent();
});

// NPC223亜人針子_NPC初期化イベント_入り口すぐの篝火近く -- NPC223 Demi-Shipper_NPC initialization event_Near the bonfire right at the entrance
$Event(11003710, Restart, function(chrEntityId) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3940)) {
            SetEventFlagID(1043379353, OFF);
        }
    }
L0:
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    if (!EventFlag(3947)) {
        WaitFor(EventFlag(3947));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(3940));
    GotoIf(L2, EventFlag(3941));
    GotoIf(L3, EventFlag(3942));
    GotoIf(L4, EventFlag(3943));
L1:
    if (!EventFlag(3957)) {
        if (!EventFlag(11109819)) {
            WaitFor(EventFlag(71102) && EventFlag(9000));
        }
    }
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    ForceAnimationPlayback(chrEntityId, 930010, false, false, false);
    SetNetworkconnectedEventFlagID(11109819, ON);
    SetNetworkconnectedEventFlagID(3957, ON);
    Goto(L20);
L2:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(chrEntityId);
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(3947));
    RestartEvent();
});

// NPC223亜人針子_母の声イベント -- NPC223 Demi-human seamstress_Mother's voice event
$Event(11003711, Restart, function(entityId) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(3943) || !EventFlag(3947) || EventFlag(1039409259));
    WaitFor(EntityInRadiusOfEntity(entityId, 20000, 4, 1) && CharacterHasSpEffect(20000, 9690));
    SetNetworkconnectedEventFlagID(1039402710, ON);
    EndEvent();
});

// NPC204マルギット_会話用の瀕死状態表示 -- NPC204 Margit_Dying state display for conversation
$Event(11003715, Restart, function(chrEntityId) {
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    SetCharacterTalkRange(chrEntityId, 17);
    GotoIf(L0, EventFlag(11000800));
    Goto(L1);
L0:
    SetCharacterTalkRange(chrEntityId, 120);
    EnableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, false);
    IssueShortWarpRequest(chrEntityId, TargetEntityType.Area, 11002721, -1);
    ForceAnimationPlayback(chrEntityId, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(chrEntityId, 930002, false, false, false);
    }
    EndEvent();
L1:
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 11000800);
    SetCharacterTalkRange(chrEntityId, 120);
    EnableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, false);
    IssueShortWarpRequest(chrEntityId, TargetEntityType.Character, 11000800, 900);
    ForceAnimationPlayback(chrEntityId, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(chrEntityId, 930002, false, false, false);
    }
    EndEvent();
});

// NPC351金仮面の従者_NPC初期化イベント -- NPC351 Gold Masked Squire_NPC initialization event
$Event(11003720, Restart, function(chrEntityId) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4200)) {
            SetEventFlagID(1040529253, OFF);
        }
    }
L10:
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    if (!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)))) {
        WaitFor(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4200));
    GotoIf(L2, EventFlag(4201));
    GotoIf(L4, EventFlag(4203));
L1:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    ForceAnimationPlayback(chrEntityId, 90101, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(chrEntityId);
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    Goto(L20);
L20:
    WaitFor(!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554))));
    RestartEvent();
});

// NPC112金仮面の探究者_NPC初期化イベント -- NPC112 Gold Masked Seeker_NPC initialization event
$Event(11003721, Restart, function(chrEntityId) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
    }
L10:
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    WaitFor(
        (!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554)));
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    ForceAnimationPlayback(chrEntityId, 930007, false, false, false);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(chrEntityId, 930009, false, false, false);
    }
    SetNetworkconnectedEventFlagID(1040549254, OFF);
    SetNetworkconnectedEventFlagID(11009554, ON);
    SetNetworkconnectedEventFlagID(1051569454, OFF);
    SetNetworkconnectedEventFlagID(11059304, OFF);
    WaitFor(
        !((!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554))));
    RestartEvent();
});

// NPC112金仮面の探究者_死亡イベント -- NPC112 Gold Masked Seeker_Death Event
$Event(11003722, Restart, function(chrEntityId) {
    WaitFixedTimeFrames(1);
    EndIf(!PlayerIsInOwnWorld());
    EnableCharacterImmortality(chrEntityId);
    WaitFor(HasDamageType(chrEntityId, 10000, DamageType.Unspecified));
    SetNetworkconnectedEventFlagID(1040542710, ON);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(chrEntityId, 20014, false, true, true);
    }
    if (!EventFlag(11009555)) {
        ForceAnimationPlayback(chrEntityId, 20013, false, true, true);
    }
    EndEvent();
});

// ラダゴン像変化イベント -- Radagon statue change event
$Event(11003723, Restart, function(entityId) {
    if (EventFlag(11009556)) {
        DisableAsset(11001715);
        EndEvent();
    }
    DisableAsset(11001705);
    SetNetworkconnectedEventFlagID(11009468, ON);
    WaitFor(
        EntityInRadiusOfEntity(20000, entityId, 4, 1)
            && PlayerIsInOwnWorld()
            && CharacterHasSpEffect(20000, 1673014));
    SpawnOneshotSFX(TargetEntityType.Asset, 11001706, -1, 811630);
    ForceAnimationPlayback(11001715, 1, false, false, false);
    EnableAsset(11001705);
    ForceAnimationPlayback(11001705, 1, false, false, false);
    SetNetworkconnectedEventFlagID(11009556, ON);
    SetNetworkconnectedEventFlagID(11009469, ON);
    SetNetworkconnectedEventFlagID(11009468, OFF);
    EndEvent();
});

// NPC351金仮面の従者_自動会話イベント -- NPC351 Gold Masked Servant_Automatic conversation event
$Event(11003724, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    SetCharacterTalkRange(11000725, 17);
    EndIf(EventFlag(11009460));
    SetCharacterTalkRange(11000725, 160);
    WaitFor(
        EventFlag(4208) && !EventFlag(11009460) && !EventFlag(11002734) && InArea(10000, 11002740));
    SetNetworkconnectedEventFlagID(11002733, ON);
    EndEvent();
});

// NPC800_赤目商人カーレ_NPC初期化イベント_王都地下へ行きたい -- NPC800_Red-eyed merchant Kare_NPC initialization event_I want to go to the underground of the royal capital
$Event(11003725, Restart, function(chrEntityId) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4700)) {
            SetEventFlagID(1042369283, OFF);
        }
    }
L10:
    if (!EventFlag(4707)) {
        DisableCharacter(chrEntityId);
        SetCharacterBackreadState(chrEntityId, true);
        WaitFor(EventFlag(4707));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4700));
    GotoIf(L2, EventFlag(4701));
    GotoIf(L3, EventFlag(4702));
    GotoIf(L4, EventFlag(4703));
L1:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.FriendlyNPC);
    ForceAnimationPlayback(chrEntityId, 30003, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(chrEntityId, false);
    EnableCharacter(chrEntityId);
    SetCharacterTeamType(chrEntityId, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(chrEntityId);
    DisableCharacter(chrEntityId);
    SetCharacterBackreadState(chrEntityId, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(4707));
    RestartEvent();
});

// NPC360_円卓の最初の褪せ人の生き残り_侵入サイン表示 -- NPC360_Survival of the first faded person at the Round Table_Intrusion sign display
$Event(11003730, Restart, function() {
    WaitFixedTimeFrames(1);
    SetEventFlagID(11009500, OFF);
    EndIf(!EventFlag(16009458));
    EndIf(!EventFlag(3886));
    SetEventFlagID(11009500, ON);
    EndEvent();
});

// NPC323糞喰い_共闘サイン停止イベント -- NPC323 Shit Eating_Cooperative Sign Stopping Event
$Event(11003740, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4247));
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 1045520180);
    SetNetworkconnectedEventFlagID(35009317, OFF);
    SetNetworkconnectedEventFlagID(35009318, OFF);
    EndEvent();
});

// NPC323糞喰い_共闘エリア到達 -- NPC323 Shit-eater_Achieved the joint battle area
$Event(11003741, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4246));
    WaitFor(
        EventFlag(4240) && EventFlag(35009306) && EntityInRadiusOfEntity(11001957, 20000, 13, 1));
    SetNetworkconnectedEventFlagID(4258, ON);
    EndEvent();
});


